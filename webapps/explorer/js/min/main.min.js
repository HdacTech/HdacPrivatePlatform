define(["jquery","handlebars","common"],function(c,b,a){var d=function(){var i=0;var n=true;var e=false;var m={url:"/getBlocks.hdac",};var h={block_template:null,};
var o={info:null,blockchain:null,information:null,blocks:null,};this.initData=function(p){i=p.yPos;o=c.parseJSON(p.result);};this.getSavedData=function(){var p={};
p.yPos=c(window).scrollTop();p.result=JSON.stringify(o);return p;};this.init=function(){g(1,true,function(){k();n=false;});};this.resume=function(){k();
};this.handleClick=function(u,t,p){var s=t.data(),r=s.name;switch(r){case"move-blocks":alert("blocks보러 가기");break;case"move-status":var q="/status.hdac";
a._COMMON_.MovePage(q,true);break;default:if(typeof p=="function"){p(u,t);}break;}};this.getYpos=function(){return i;};this.getInit=function(){return n;
};var g=function(r,q,p){if(q){var u=c.parseJSON(c("[name=sync]").val());var v=c.parseJSON(c("[name=info]").val());var t={blockchain:[{name:"Height",value:v.info.blocks,},{name:"Difficulty",value:v.info.difficulty,},{name:"Relay Fee",value:v.info.relayfee,},{name:"Avg Fee",value:0,},{name:"Age",value:0,},{name:"Block Count",value:0,},],information:[{name:"Avg Block Time(sec)",value:0,},{name:"Avg Transactins per Block",value:0,},{name:"Avg Size per Block",value:0,},{name:"Amount Transferred",value:0,},{name:"Amount Mined",value:0,},{name:"Amount per Block",value:0,},],};
t.blockchain.name="Blockchain";t.information.name="Block information";o.blockchain=t.blockchain;o.information=t.information;o.info={conn:v.info.connections,height:v.info.blocks,};
if(typeof p=="function"){p();}}else{if(e){return;}var w={limit:5,};var s={type:"get",dataType:"json",url:m.url,cache:false,data:w,};c.ajax(s).done(function(y,x,z){if(y&&y.blocks){o.blocks=y.blocks;
}if(typeof p=="function"){p();}e=false;});e=true;}};var k=function(){var p=function(){b.registerHelper("num2CommaPoint",function(r,q){r=parseFloat(r.toString().point(q));
return r.toString().num2Comma();});b.registerHelper("toGMT",function(r){var q=Math.ceil((new Date()-new Date(r*1000))/1000);if(q<60){return q+" seconds ago";
}q=Math.ceil(q/60);if(q<60){return q+" minutes ago";}q=Math.ceil(q/60);if(q<24){return q+" hours ago";}q=Math.ceil(q/24);return q+" days ago";});};p();
j();f();l(true);};var j=function(){var p=b.compile(c("#header-common").html());c("#wrap").prepend(p(o.info));};var f=function(){var p=b.compile(c("#blockchain-table").html());
c("#home").html(p(o.blockchain));c("#home").append(p(o.information));p=b.compile(c("#banner").html());c("#home").append(p());};var l=function(p){g(1,false,function(){if(p){var q=b.compile(c("#blocks-table").html());
b.registerPartial("blocks",c("#blocks-partial").html());c("#home").append(q(o.blocks));}else{if(h.block_template==null){h.block_template=b.compile(c("#blocks-partial").html());
}c("#latest-blocks").html(h.block_template(o.blocks));}});setTimeout(function(){},60000);};};return new d();});